<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGen Gadgets - Your Ultimate Tech Destination</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5; /* Indigo */
            --primary-light: #6366f1;
            --primary-dark: #4338ca;
            --secondary: #f59e0b; /* Amber */
            --accent: #10b981; /* Emerald green */
            --text-dark: #1f2937; /* Dark gray */
            --text-light: #f9fafb; /* Off-white */
            --bg-light: #f9fafb; /* Light background */
            --bg-medium: #e5e7eb; /* Medium light background */
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --shadow-sm: rgba(0, 0, 0, 0.05);
            --shadow-md: rgba(0, 0, 0, 0.1);
            --shadow-lg: rgba(0, 0, 0, 0.2);
            --danger: #ef4444; /* Red for errors/delete */
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .container {
            width: 100%;
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            background: var(--text-dark);
            color: var(--text-light);
            padding: 18px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 15px var(--shadow-md);
            transition: all 0.3s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--text-light);
            text-decoration: none;
            cursor: pointer;
        }

        .logo i {
            color: var(--secondary);
            transition: transform 0.3s ease;
        }

        .logo:hover i {
            transform: rotate(15deg) scale(1.1);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 36px;
            align-items: center;
        }

        nav a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.05rem;
            transition: color 0.3s ease, transform 0.3s ease;
            position: relative;
            padding: 8px 0;
        }

        nav a:hover {
            color: var(--secondary);
            transform: translateY(-3px);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background-color: var(--secondary);
            transition: width 0.3s ease;
        }

        nav a:hover::after {
            width: 100%;
        }

        .nav-icons {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .icon-btn {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.5rem;
            cursor: pointer;
            position: relative;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .icon-btn:hover {
            color: var(--secondary);
            transform: scale(1.1);
        }

        .cart-count, .notification-count {
            position: absolute;
            top: -8px;
            right: -10px;
            background-color: var(--accent);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: bounceIn 0.5s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .mobile-menu-btn:hover {
            transform: rotate(90deg);
        }

        /* Section Common Styles */
        section {
            padding: 100px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 70px;
        }

        .section-title h2 {
            font-size: 3.5rem;
            color: var(--text-dark);
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 800;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: var(--primary);
            border-radius: 3px;
        }

        .section-title p {
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.15rem;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(31, 41, 55, 0.8), rgba(17, 24, 39, 0.9)), url('https://images.unsplash.com/photo-1593642632823-8f785ba67e45?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1920&h=1080') no-repeat center center/cover;
            color: var(--text-light);
            text-align: center;
            padding: 140px 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(79, 70, 229, 0.3) 0%, transparent 70%);
            animation: pulse 5s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.5; }
            100% { transform: scale(1.2); opacity: 0.7; }
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 900px;
        }

        .hero h1 {
            font-size: 4.5rem;
            margin-bottom: 28px;
            letter-spacing: -2px;
            line-height: 1.1;
            text-shadow: 0 5px 15px rgba(0,0,0,0.4);
            animation: fadeInDown 1s ease-out;
        }

        .hero p {
            font-size: 1.4rem;
            max-width: 750px;
            margin: 0 auto 40px;
            color: #e0e7eb;
            animation: fadeInUp 1s ease-out 0.3s forwards;
            opacity: 0;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 25px;
            animation: fadeIn 1s ease-out 0.6s forwards;
            opacity: 0;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 16px 40px;
            border-radius: 9999px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            border: 2px solid var(--primary);
            box-shadow: 0 6px 20px var(--shadow-md);
            cursor: pointer;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 10px 30px var(--shadow-lg);
        }

        .btn-secondary {
            background: transparent;
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: white;
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 10px 30px var(--shadow-lg);
        }

        /* Quick Access Section */
        .quick-access {
            background-color: var(--bg-medium);
            padding: 80px 0;
            text-align: center;
        }

        .quick-access .btn-group {
            margin-top: 40px;
            flex-direction: row; /* Ensure buttons are in a row */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: 30px;
        }

        .quick-access .btn {
            min-width: 220px;
            padding: 18px 45px;
            font-size: 1.2rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px var(--shadow-md);
        }

        .quick-access .btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 12px 35px var(--shadow-lg);
        }

        /* About Section */
        .about-content {
            display: flex;
            gap: 60px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .about-text {
            flex: 1;
            min-width: 320px;
        }

        .about-text h3 {
            font-size: 2.5rem;
            margin-bottom: 28px;
            color: var(--primary-dark);
            font-weight: 700;
        }

        .about-text p {
            margin-bottom: 20px;
            color: var(--gray);
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .about-image {
            flex: 1;
            min-width: 350px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px var(--shadow-md);
            transition: transform 0.5s ease;
        }

        .about-image:hover {
            transform: translateY(-15px);
        }

        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }

        .about-image:hover img {
            transform: scale(1.07);
        }

        /* Testimonials Section */
        .testimonials {
            background: linear-gradient(135deg, #e0f7fa, #e3f2fd);
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }

        .testimonial-card {
            background: var(--card-bg);
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 10px 25px var(--shadow-sm);
            position: relative;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px var(--shadow-md);
        }

        .testimonial-content {
            margin-bottom: 28px;
            color: var(--gray);
            position: relative;
            z-index: 1;
            font-style: italic;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        .testimonial-content::before {
            content: "\201C";
            font-size: 4.5rem;
            color: var(--primary);
            position: absolute;
            top: -20px;
            left: -15px;
            opacity: 0.1;
            z-index: 0;
        }
        .testimonial-content::after {
            content: "\201D";
            font-size: 4.5rem;
            color: var(--primary);
            position: absolute;
            bottom: -35px;
            right: -15px;
            opacity: 0.1;
            z-index: 0;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            margin-top: 25px;
        }

        .author-image {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 18px;
            border: 4px solid var(--primary-light);
            flex-shrink: 0;
        }

        .author-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .author-info h4 {
            margin-bottom: 5px;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .author-info p {
            color: var(--gray);
            font-size: 1rem;
        }

        /* Contact Section */
        .contact-container {
            display: flex;
            gap: 60px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .contact-info {
            flex: 1;
            min-width: 320px;
        }

        .contact-method {
            display: flex;
            align-items: flex-start;
            margin-bottom: 35px;
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.6rem;
            margin-right: 25px;
            box-shadow: 0 5px 15px var(--shadow-sm);
            flex-shrink: 0;
        }

        .contact-details h4 {
            margin-bottom: 10px;
            font-size: 1.4rem;
            color: var(--text-dark);
            font-weight: 700;
        }

        .contact-details p, .contact-details a {
            color: var(--gray);
            text-decoration: none;
            font-size: 1.05rem;
        }

        .contact-details a:hover {
            color: var(--primary);
            text-decoration: underline;
        }

        .social-links {
            display: flex;
            gap: 25px;
            margin-top: 45px;
        }

        .social-links a {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
            font-size: 1.4rem;
            box-shadow: 0 5px 15px var(--shadow-sm);
        }

        .social-links a:hover {
            background: var(--primary-dark);
            transform: translateY(-10px) rotate(8deg);
            box-shadow: 0 10px 20px var(--shadow-md);
        }

        .contact-form {
            flex: 1;
            min-width: 350px;
            background: var(--card-bg);
            padding: 45px;
            border-radius: 20px;
            box-shadow: 0 10px 25px var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 28px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.05rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.05rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
        }

        .form-group textarea {
            height: 200px;
            resize: vertical;
        }

        /* Footer */
        footer {
            background: var(--text-dark);
            color: var(--text-light);
            padding: 70px 0 35px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 50px;
            margin-bottom: 50px;
        }

        .footer-column h3 {
            font-size: 1.6rem;
            margin-bottom: 28px;
            position: relative;
            padding-bottom: 15px;
            color: var(--text-light);
            font-weight: 700;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .footer-column p {
            color: #cbd5e1;
            line-height: 1.7;
            font-size: 1rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 16px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            transition: color 0.3s ease, transform 0.3s ease;
            display: inline-block;
            font-size: 1.05rem;
        }

        .footer-links a:hover {
            color: var(--secondary);
            transform: translateX(10px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 35px;
            border-top: 1px solid #334155;
            color: #94a3b8;
            font-size: 0.95rem;
        }

        .footer-column .form-group {
            margin-bottom: 0;
        }
        .footer-column .form-group input {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            color: white;
        }
        .footer-column .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        .footer-column .btn {
            width: 100%;
            text-align: center;
            padding: 14px 25px;
            font-size: 1.05rem;
            margin-top: 15px;
        }

        /* Quick View Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            width: 95%;
            max-width: 900px;
            box-shadow: 0 15px 40px var(--shadow-lg);
            position: relative;
            transform: translateY(30px);
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .modal-close-btn:hover {
            color: var(--text-dark);
            transform: rotate(90deg);
        }

        .modal-image {
            flex: 1;
            min-width: 300px;
            max-width: 48%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px var(--shadow-sm);
        }
        .modal-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .modal-details {
            flex: 1;
            min-width: 350px;
        }
        .modal-details .product-category {
            font-size: 1.1rem;
            margin-bottom: 12px;
        }
        .modal-details .product-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 800;
        }
        .modal-details .product-price {
            font-size: 2.5rem;
            margin-bottom: 25px;
            font-weight: 800;
        }
        .modal-details .product-rating {
            font-size: 1.3rem;
            margin-bottom: 25px;
        }
        .modal-details p {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        .modal-details .quantity-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .quantity-selector label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.1rem;
        }
        .quantity-selector input {
            width: 80px;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
        }
        .quantity-selector input::-webkit-outer-spin-button,
        .quantity-selector input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .quantity-selector button {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            font-size: 1.4rem;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .quantity-selector button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        .modal-add-to-cart {
            width: 100%;
            padding: 18px;
            font-size: 1.3rem;
            border-radius: 12px;
        }

        /* Cart Modal Styles */
        #cartModal .modal-content {
            max-width: 1000px;
            flex-direction: column;
            align-items: center;
        }
        #cartModal .modal-details {
            width: 100%;
            min-width: unset;
        }
        .cart-items-container {
            width: 100%;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
        }
        .cart-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--card-bg);
            transition: background-color 0.2s ease;
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-item:hover {
            background-color: var(--bg-light);
        }
        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-details h4 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: var(--text-dark);
        }
        .cart-item-details p {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        .cart-item-price {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
        }
        .cart-item-quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .cart-item-quantity-controls input {
            width: 60px;
            padding: 5px 8px;
            font-size: 1rem;
            border-radius: 5px;
        }
        .cart-item-quantity-controls button {
            width: 30px;
            height: 30px;
            font-size: 1rem;
            border-radius: 5px;
        }
        .remove-from-cart {
            background-color: var(--danger);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .remove-from-cart:hover {
            background-color: #c23333;
        }
        .cart-summary {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        .cart-summary div {
            display: flex;
            justify-content: space-between;
        }
        .cart-summary .total {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-dark);
        }
        .checkout-btn {
            width: 100%;
            margin-top: 30px;
            padding: 15px;
            font-size: 1.3rem;
            background-color: var(--accent);
            border-color: var(--accent);
        }
        .checkout-btn:hover {
            background-color: #0d9266;
            border-color: #0d9266;
        }
        .empty-cart-message {
            text-align: center;
            padding: 50px;
            color: var(--gray);
            font-size: 1.2rem;
        }

        /* Auth Modal Styles */
        #authModal .modal-content {
            max-width: 500px;
            padding: 40px; /* Increased padding */
            text-align: center;
            background: linear-gradient(145deg, var(--card-bg), var(--bg-light)); /* Gradient background */
            border-radius: 25px; /* More rounded */
            box-shadow: 0 15px 40px rgba(0,0,0,0.25); /* Stronger shadow */
            animation: scaleIn 0.3s ease-out forwards; /* New animation */
        }

        @keyframes scaleIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        #authModal .modal-content h3 {
            font-size: 2.5rem; /* Larger title */
            margin-bottom: 30px; /* Increased margin */
            color: var(--primary-dark);
            font-weight: 800;
            position: relative;
        }
        #authModal .modal-content h3::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }
        #authModal .form-group {
            margin-bottom: 25px; /* Increased margin */
        }
        #authModal .form-group label {
            font-size: 1.1rem;
            color: var(--text-dark);
            text-align: left;
            width: 100%;
        }
        #authModal .form-group input {
            padding: 14px 20px; /* Increased padding */
            border-radius: 12px; /* More rounded inputs */
            border: 1px solid var(--border-color);
            background-color: var(--bg-light);
            font-size: 1.05rem;
            box-shadow: inset 0 1px 3px var(--shadow-sm);
        }
        #authModal .form-group input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.3);
        }
        #authModal .btn {
            width: 100%;
            margin-top: 25px; /* Increased margin */
            padding: 15px; /* Increased padding */
            font-size: 1.2rem;
            border-radius: 12px; /* More rounded buttons */
            background: var(--primary);
            box-shadow: 0 5px 15px var(--shadow-sm);
        }
        #authModal .btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px var(--shadow-md);
        }
        #authModal .toggle-auth-mode {
            font-size: 1rem; /* Slightly larger text */
            margin-top: 20px; /* Increased margin */
            color: var(--primary);
            font-weight: 600;
        }
        #authModal .toggle-auth-mode:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }
        #authModal .error-message {
            color: var(--danger);
            font-size: 1rem; /* Slightly larger error message */
            margin-top: 15px;
            font-weight: 500;
        }
        .user-greeting {
            color: var(--accent);
            font-weight: 600;
            margin-right: 15px;
            font-size: 1.1rem;
        }

        /* Back to Top Button */
        #back-to-top {
            display: none;
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary);
            color: white;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.6rem;
            cursor: pointer;
            box-shadow: 0 5px 15px var(--shadow-md);
            transition: background-color 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
            z-index: 999;
            opacity: 0;
            transform: translateY(20px);
        }
        #back-to-top.show {
            opacity: 1;
            transform: translateY(0);
        }
        #back-to-top:hover {
            background-color: var(--primary-dark);
            transform: translateY(-8px) scale(1.05);
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .hero h1 {
                font-size: 3.8rem;
            }
            .section-title h2 {
                font-size: 3rem;
            }
            .modal-image {
                max-width: 100%;
            }
            .modal-content {
                flex-direction: column;
                max-width: 90%;
                padding: 30px;
            }
            .modal-image, .modal-details {
                min-width: unset;
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            nav ul {
                position: fixed;
                top: 75px; /* Adjust based on header height */
                left: -100%;
                background: var(--text-dark);
                width: 100%;
                flex-direction: column;
                align-items: center;
                padding: 30px 0;
                transition: left 0.4s ease-in-out;
                box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
            }

            nav ul.active {
                left: 0;
            }

            nav ul li {
                margin-bottom: 25px;
            }
            nav ul li:last-child {
                margin-bottom: 0;
            }
            nav ul a {
                font-size: 1.3rem;
                padding: 10px 0;
            }
            .nav-icons {
                display: none; /* Hide icons in mobile menu, show only in header */
            }
            .header-content .nav-icons {
                display: flex; /* Keep icons in header even if menu is open */
            }

            .hero {
                padding: 100px 24px;
            }
            .hero h1 {
                font-size: 3rem;
            }
            .hero p {
                font-size: 1.2rem;
            }
            .btn-group {
                flex-direction: column;
                gap: 20px;
            }
            .btn {
                width: 90%;
                max-width: 350px;
            }

            .section-title h2 {
                font-size: 2.5rem;
            }
            .section-title p {
                font-size: 1.05rem;
            }

            .about-content,
            .contact-container {
                flex-direction: column;
                gap: 40px;
            }

            .about-image {
                width: 100%;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            .footer-column h3::after {
                left: 50%;
                transform: translateX(-50%);
            }
            .footer-links {
                padding: 0;
            }

            .modal-content {
                padding: 25px;
            }
            .modal-details .product-title {
                font-size: 2.2rem;
            }
            .modal-details .product-price {
                font-size: 2.2rem;
            }
            .cart-item {
                flex-wrap: wrap;
                justify-content: center;
                text-align: center;
            }
            .cart-item-details, .cart-item-quantity-controls {
                width: 100%;
                justify-content: center;
            }
            .cart-item-image {
                margin-bottom: 10px;
            }

            #authModal .modal-content {
                padding: 25px;
            }
            #authModal .modal-content h3 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            .logo {
                font-size: 1.8rem;
            }
            .icon-btn {
                font-size: 1.3rem;
            }
            .mobile-menu-btn {
                font-size: 1.6rem;
            }
            .hero h1 {
                font-size: 2.5rem;
            }
            .hero p {
                font-size: 1rem;
            }
            .btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            .section-title h2 {
                font-size: 2rem;
            }
            .category-card, .product-card, .testimonial-card, .contact-form {
                padding: 25px;
            }
            .product-title {
                font-size: 1.5rem;
            }
            .product-price {
                font-size: 1.6rem;
            }
            .add-to-cart {
                font-size: 1rem;
            }
            #back-to-top {
                width: 48px;
                height: 48px;
                font-size: 1.4rem;
                bottom: 25px;
                right: 25px;
            }
            .modal-content {
                padding: 20px;
            }
            .modal-details .product-title {
                font-size: 1.8rem;
            }
            .modal-details .product-price {
                font-size: 1.8rem;
            }
            .modal-close-btn {
                font-size: 1.5rem;
                top: 10px;
                right: 10px;
            }
            .cart-item-details h4 {
                font-size: 1.1rem;
            }
            .cart-item-price {
                font-size: 1rem;
            }
            #authModal .modal-content {
                padding: 20px;
            }
            #authModal .modal-content h3 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-bolt"></i>
                <span>NextGen Gadgets</span>
            </a>
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="categories.html">Categories</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li class="nav-icons">
                        <span id="userGreeting" class="user-greeting" style="display: none;"></span>
                        <button class="icon-btn" id="loginBtn" title="Login / Register">
                            <i class="fas fa-user-circle"></i>
                        </button>
                        <button class="icon-btn" id="cartBtn" title="View Cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container hero-content">
            <h1>Experience the Future of Technology Today</h1>
            <p>Explore our curated selection of cutting-edge electronics, from powerful laptops to innovative smart home devices. Quality, innovation, and unbeatable prices await.</p>
            <div class="btn-group">
                <a href="products.html" class="btn">Shop Latest</a>
                <a href="categories.html" class="btn btn-secondary">Discover More</a>
            </div>
        </div>
    </section>

    <!-- Quick Access Section -->
    <section class="quick-access">
        <div class="container">
            <div class="section-title">
                <h2>Ready to Explore?</h2>
                <p>Jump directly to our product catalog or browse by category.</p>
            </div>
            <div class="btn-group">
                <a href="products.html" class="btn">View All Products <i class="fas fa-arrow-right ml-2"></i></a>
                <a href="categories.html" class="btn btn-secondary">Browse Categories <i class="fas fa-th-large ml-2"></i></a>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about">
        <div class="container">
            <div class="section-title">
                <h2>About NextGen Gadgets</h2>
                <p>Our commitment to quality, innovation, and customer satisfaction.</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3>Our Story & Vision</h3>
                    <p>Founded in 2025 by a team of passionate tech enthusiasts, NextGen Gadgets was born from a simple idea: to make cutting-edge technology accessible to everyone. We believe that the right gadget can transform daily life, enhance productivity, and unlock new possibilities.</p>
                    <p>Our vision is to be your trusted partner in navigating the ever-evolving world of electronics, offering not just products, but solutions that genuinely improve your digital lifestyle. We meticulously select each item, ensuring it meets our rigorous standards for quality, performance, and reliability.</p>
                    <p>From the latest smartphones and powerful laptops to immersive audio devices and smart home innovations, we're dedicated to bringing you the best. Our commitment extends beyond the sale, with exceptional customer support and a seamless shopping experience.</p>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1200&h=800" alt="Modern Office Tech Environment">
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials">
        <div class="container">
            <div class="section-title">
                <h2>What Our Customers Say</h2>
                <p>Hear from the community that trusts NextGen Gadgets.</p>
            </div>
            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "NextGen Gadgets consistently delivers top-tier products with incredible speed. Their customer service is responsive and truly helpful. My go-to for all electronics!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                             <img src="https://placehold.co/100x100/4f46e5/FFFFFF?text=AK" alt="Anjali Kumar">
                        </div>
                        <div class="author-info">
                            <h4>Anjali Kumar</h4>
                            <p>Mumbai, Maharashtra</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "I was amazed by the selection and the seamless checkout process. The laptop I ordered arrived perfectly packaged and exceeded my expectations. Highly recommend!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                            <img src="https://placehold.co/100x100/f59e0b/FFFFFF?text=RS" alt="Rahul Sharma">
                        </div>
                        <div class="author-info">
                            <h4>Rahul Sharma</h4>
                            <p>Bengaluru, Karnataka</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "Finally, an electronics store that understands quality! Every product I've bought from NextGen Gadgets has been fantastic. Their detailed descriptions are a huge plus."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                            <img src="https://placehold.co/100x100/10b981/FFFFFF?text=SP" alt="Sneha Patel">
                        </div>
                        <div class="author-info">
                            <h4>Sneha Patel</h4>
                            <p>Delhi, NCR</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Contact Section -->
    <section id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Get In Touch</h2>
                <p>We're here to help! Reach out to us for any inquiries or support.</p>
            </div>
            <div class="contact-container">
                <div class="contact-info">
                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h4>Our Headquarters</h4>
                            <p>456 Innovation Drive, Tech City, TX 78701, USA</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h4>Customer Support</h4>
                            <p>+1 (800) 555-0123</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h4>Email Us</h4>
                            <p><a href="mailto:support@nextgengadgets.com">support@nextgengadgets.com</a></p>
                        </div>
                    </div>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="contact-form">
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="contactName">Full Name</label>
                            <input type="text" id="contactName" placeholder="Your Name" required>
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Email Address</label>
                            <input type="email" id="contactEmail" placeholder="Your Email" required>
                        </div>
                        <div class="form-group">
                            <label for="contactSubject">Subject</label>
                            <input type="text" id="contactSubject" placeholder="Subject of your message" required>
                        </div>
                        <div class="form-group">
                            <label for="contactMessage">Message</label>
                            <textarea id="contactMessage" placeholder="Your message..." required></textarea>
                        </div>
                        <button type="submit" class="btn">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>NextGen Gadgets</h3>
                    <p>Your ultimate destination for cutting-edge electronics and smart gadgets. Innovation, quality, and exceptional service.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="categories.html">Categories</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Returns & Refunds</a></li>
                        <li><a href="#">Order Tracking</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Stay Connected</h3>
                    <p>Subscribe to our newsletter for exclusive offers and tech news!</p>
                    <div class="form-group">
                        <input type="email" placeholder="Enter your email">
                        <button class="btn">Subscribe</button>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 NextGen Gadgets. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Quick View Modal -->
    <div class="modal-overlay" id="quickViewModal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeQuickViewModalBtn"><i class="fas fa-times"></i></button>
            <div class="modal-image">
                <img id="modalProductImage" src="" alt="Product Image">
            </div>
            <div class="modal-details">
                <div class="product-category" id="modalProductCategory"></div>
                <h3 class="product-title" id="modalProductTitle"></h3>
                <div class="product-price" id="modalProductPrice"></div>
                <div class="product-rating" id="modalProductRating"></div>
                <p id="modalProductDescription"></p>
                <div class="quantity-selector">
                    <label for="modalProductQuantity">Quantity:</label>
                    <button id="decreaseModalQuantity">-</button>
                    <input type="number" id="modalProductQuantity" value="1" min="1">
                    <button id="increaseModalQuantity">+</button>
                </div>
                <button class="btn modal-add-to-cart" id="modalAddToCartBtn">Add to Cart</button>
            </div>
        </div>
    </div>

    <!-- Shopping Cart Modal -->
    <div class="modal-overlay" id="cartModal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeCartModalBtn"><i class="fas fa-times"></i></button>
            <h3>Your Shopping Cart</h3>
            <div class="cart-items-container" id="cartItemsContainer">
                <!-- Cart items will be loaded here -->
            </div>
            <div class="cart-summary">
                <div>Subtotal: <span id="cartSubtotal">Rs.0</span></div>
                <div>Shipping: <span id="cartShipping">Rs.0</span></div>
                <div class="total">Total: <span id="cartTotal">Rs.0</span></div>
            </div>
            <button class="btn checkout-btn">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Login/Register Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeAuthModalBtn"><i class="fas fa-times"></i></button>
            <h3 id="authModalTitle">Login</h3>
            <form id="authForm">
                <div class="form-group">
                    <label for="authUsername">Username:</label>
                    <input type="text" id="authUsername" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="authPassword">Password:</label>
                    <input type="password" id="authPassword" placeholder="Enter your password" required>
                </div>
                <div class="form-group" id="confirmPasswordGroup" style="display: none;">
                    <label for="authConfirmPassword">Confirm Password:</label>
                    <input type="password" id="authConfirmPassword" placeholder="Confirm your password" required>
                </div>
                <button type="submit" class="btn" id="authSubmitBtn">Login</button>
                <p class="error-message" id="authErrorMessage" style="display: none;"></p>
                <button type="button" class="toggle-auth-mode" id="toggleAuthMode">Don't have an account? Register</button>
            </form>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button id="back-to-top" title="Back to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // --- Global State ---
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const products = [
            {
                id: 'prod1',
                name: 'iPhone 15 Pro Max',
                category: 'Smartphone',
                price: 129999,
                oldPrice: 149999,
                rating: 5,
                image: 'https://placehold.co/600x400/4f46e5/FFFFFF?text=iPhone+15+Pro+Max',
                description: 'The latest flagship from Apple, featuring the A17 Bionic chip, ProMotion display, and an advanced camera system for unparalleled performance and photography.'
            },
            {
                id: 'prod2',
                name: 'Dell XPS 15',
                category: 'Laptop',
                price: 98000,
                oldPrice: 120000,
                rating: 4.5,
                image: 'https://placehold.co/600x400/f59e0b/FFFFFF?text=Dell+XPS+15',
                description: 'A premium laptop known for its stunning InfinityEdge display, powerful Intel processor, and sleek design. Perfect for creative professionals and power users.'
            },
            {
                id: 'prod3',
                name: 'Sony WH-1000XM5',
                category: 'Audio',
                price: 28999,
                oldPrice: 34999,
                rating: 5,
                image: 'https://placehold.co/600x400/10b981/FFFFFF?text=Sony+WH-1000XM5',
                description: 'Industry-leading noise-canceling headphones with exceptional sound quality, comfortable design, and smart features for an immersive listening experience.'
            },
            {
                id: 'prod4',
                name: 'Samsung Galaxy Watch 6',
                category: 'Wearable',
                price: 18000,
                oldPrice: 22000,
                rating: 4,
                image: 'https://placehold.co/600x400/4f46e5/FFFFFF?text=Galaxy+Watch+6',
                description: 'Track your fitness, monitor your health, and stay connected with the stylish and feature-rich Samsung Galaxy Watch 6. Compatible with Android devices.'
            },
            {
                id: 'prod5',
                name: 'LG C3 OLED TV',
                category: 'Smart Home',
                price: 150000,
                oldPrice: 180000,
                rating: 5,
                image: 'https://placehold.co/600x400/f59e0b/FFFFFF?text=LG+C3+OLED+TV',
                description: 'Experience unparalleled picture quality with LG\'s C3 OLED TV. Perfect blacks, vibrant colors, and incredible contrast bring your entertainment to life.'
            },
            {
                id: 'prod6',
                name: 'DJI Mini 4 Pro',
                category: 'Cameras & Drones',
                price: 85000,
                oldPrice: 95000,
                rating: 4.5,
                image: 'https://placehold.co/600x400/10b981/FFFFFF?text=DJI+Mini+4+Pro',
                description: 'A compact and powerful drone with advanced camera capabilities and intelligent features, perfect for capturing stunning aerial footage.'
            },
            {
                id: 'prod7',
                name: 'Nintendo Switch OLED',
                category: 'Gaming Gear',
                price: 32000,
                oldPrice: 36000,
                rating: 4.5,
                image: 'https://placehold.co/600x400/4f46e5/FFFFFF?text=Nintendo+Switch+OLED',
                description: 'Enjoy vibrant colors and crisp contrast with a 7-inch OLED screen. Play at home on the TV or take it on the go with the versatile Nintendo Switch.'
            },
            {
                id: 'prod8',
                name: 'Amazon Echo Dot (5th Gen)',
                category: 'Smart Home',
                price: 4999,
                oldPrice: 5499,
                rating: 4,
                image: 'https://placehold.co/600x400/f59e0b/FFFFFF?text=Echo+Dot+5th+Gen',
                description: 'The most popular smart speaker with Alexa. Enjoy improved audio, new temperature sensor, and tap gesture controls for smart home convenience.'
            }
        ];
        const users = JSON.parse(localStorage.getItem('users')) || {}; // Simulated user database

        // --- DOM Elements ---
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('nav ul');
        const cartCountSpan = document.querySelector('.cart-count');
        const productsGrid = document.getElementById('productsGrid'); // This will be null on index.html
        const userGreeting = document.getElementById('userGreeting');

        // Modals
        const quickViewModal = document.getElementById('quickViewModal');
        const closeQuickViewModalBtn = document.getElementById('closeQuickViewModalBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCartModalBtn = document.getElementById('closeCartModalBtn');
        const authModal = document.getElementById('authModal');
        const closeAuthModalBtn = document.getElementById('closeAuthModalBtn');

        // Quick View Modal Elements (will be null on index.html if not used)
        const modalProductImage = document.getElementById('modalProductImage');
        const modalProductCategory = document.getElementById('modalProductCategory');
        const modalProductTitle = document.getElementById('modalProductTitle');
        const modalProductPrice = document.getElementById('modalProductPrice');
        const modalProductRating = document.getElementById('modalProductRating');
        const modalProductDescription = document.getElementById('modalProductDescription');
        const modalProductQuantityInput = document.getElementById('modalProductQuantity');
        const decreaseModalQuantityBtn = document.getElementById('decreaseModalQuantity');
        const increaseModalQuantityBtn = document.getElementById('increaseModalQuantity');
        const modalAddToCartBtn = document.getElementById('modalAddToCartBtn');

        // Cart Modal Elements
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const cartSubtotalSpan = document.getElementById('cartSubtotal');
        const cartShippingSpan = document.getElementById('cartShipping');
        const cartTotalSpan = document.getElementById('cartTotal');
        const checkoutBtn = document.querySelector('.checkout-btn');

        // Auth Modal Elements
        const loginBtn = document.getElementById('loginBtn');
        const authModalTitle = document.getElementById('authModalTitle');
        const authForm = document.getElementById('authForm');
        const authUsernameInput = document.getElementById('authUsername');
        const authPasswordInput = document.getElementById('authPassword');
        const authConfirmPasswordInput = document.getElementById('authConfirmPassword');
        const confirmPasswordGroup = document.getElementById('confirmPasswordGroup');
        const authSubmitBtn = document.getElementById('authSubmitBtn');
        const authErrorMessage = document.getElementById('authErrorMessage');
        const toggleAuthModeBtn = document.getElementById('toggleAuthMode');
        let isLoginMode = true; // State for login/register modal

        // Back to Top Button
        const backToTopButton = document.getElementById('back-to-top');

        // --- Utility Functions ---
        function formatPrice(price) {
            return `Rs.${price.toLocaleString('en-IN')}`;
        }

        function getRatingStars(rating) {
            let ratingHtml = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            for (let i = 0; i < fullStars; i++) {
                ratingHtml += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                ratingHtml += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = 0; i < (5 - fullStars - (hasHalfStar ? 1 : 0)); i++) {
                ratingHtml += '<i class="far fa-star"></i>';
            }
            return ratingHtml;
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function saveCurrentUser() {
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserGreeting();
        }

        function saveUsers() {
            localStorage.setItem('users', JSON.stringify(users));
        }

        // --- UI Update Functions ---
        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCountSpan.textContent = totalItems;
            cartCountSpan.style.display = totalItems > 0 ? 'flex' : 'none';
        }

        function updateUserGreeting() {
            if (currentUser) {
                userGreeting.textContent = `Hi, ${currentUser.username}!`;
                userGreeting.style.display = 'inline-block';
                loginBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i>';
                loginBtn.title = 'Logout';
            } else {
                userGreeting.textContent = '';
                userGreeting.style.display = 'none';
                loginBtn.innerHTML = '<i class="fas fa-user-circle"></i>';
                loginBtn.title = 'Login / Register';
            }
        }

        function renderProducts() {
            // This function will only execute on products.html
            if (!productsGrid) return;

            productsGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card');
                productCard.dataset.productId = product.id;

                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${product.category}</div>
                        <h3 class="product-title">${product.name}</h3>
                        <div class="product-price">
                            ${formatPrice(product.price)}
                            ${product.oldPrice && product.oldPrice !== 0 ? `<span>${formatPrice(product.oldPrice)}</span>` : ''}
                        </div>
                        <div class="product-rating">
                            ${getRatingStars(product.rating)}
                        </div>
                        <button class="add-to-cart" data-product-id="${product.id}">Add to Cart</button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });

            // Re-attach event listeners for add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', handleAddToCartClick);
            });
            // Re-attach event listeners for quick view
            document.querySelectorAll('.product-image').forEach(imageDiv => {
                imageDiv.addEventListener('click', handleProductImageClick);
            });
        }

        function renderCartItems() {
            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="empty-cart-message">Your cart is empty. Start shopping!</p>';
                cartSubtotalSpan.textContent = formatPrice(0);
                cartShippingSpan.textContent = formatPrice(0);
                cartTotalSpan.textContent = formatPrice(0);
                checkoutBtn.disabled = true;
                checkoutBtn.style.opacity = 0.6;
                checkoutBtn.style.cursor = 'not-allowed';
                return;
            }

            let subtotal = 0;
            const shippingCost = 500; // Example fixed shipping cost

            cart.forEach(item => {
                const product = products.find(p => p.id === item.productId);
                if (!product) return; // Should not happen if product IDs are consistent

                const itemTotal = product.price * item.quantity;
                subtotal += itemTotal;

                const cartItemDiv = document.createElement('div');
                cartItemDiv.classList.add('cart-item');
                cartItemDiv.dataset.productId = product.id;

                cartItemDiv.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="cart-item-details">
                        <h4>${product.name}</h4>
                        <p>${product.category}</p>
                        <div class="cart-item-price">${formatPrice(product.price)} each</div>
                    </div>
                    <div class="cart-item-quantity-controls">
                        <button class="decrease-quantity" data-product-id="${product.id}">-</button>
                        <input type="number" value="${item.quantity}" min="1" data-product-id="${product.id}" class="cart-quantity-input">
                        <button class="increase-quantity" data-product-id="${product.id}">+</button>
                    </div>
                    <button class="remove-from-cart" data-product-id="${product.id}"><i class="fas fa-trash"></i></button>
                `;
                cartItemsContainer.appendChild(cartItemDiv);
            });

            cartSubtotalSpan.textContent = formatPrice(subtotal);
            cartShippingSpan.textContent = formatPrice(shippingCost);
            cartTotalSpan.textContent = formatPrice(subtotal + shippingCost);
            checkoutBtn.disabled = false;
            checkoutBtn.style.opacity = 1;
            checkoutBtn.style.cursor = 'pointer';

            // Attach event listeners for quantity controls and remove buttons
            document.querySelectorAll('.decrease-quantity').forEach(btn => {
                btn.addEventListener('click', handleQuantityChange);
            });
            document.querySelectorAll('.increase-quantity').forEach(btn => {
                btn.addEventListener('click', handleQuantityChange);
            });
            document.querySelectorAll('.cart-quantity-input').forEach(input => {
                input.addEventListener('change', handleQuantityInputChange);
            });
            document.querySelectorAll('.remove-from-cart').forEach(btn => {
                btn.addEventListener('click', handleRemoveFromCart);
            });
        }

        // --- Event Handlers ---

        // Mobile menu toggle
        mobileMenuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            mobileMenuBtn.innerHTML = navMenu.classList.contains('active') ?
                '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Smooth scrolling for navigation links (only for internal links on the same page)
        document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                // Only prevent default and scroll if the target is on the current page
                if (targetElement && window.location.pathname.endsWith('index.html') || window.location.pathname === '/') {
                    e.preventDefault();
                    window.scrollTo({
                        top: targetElement.offsetTop - (header.offsetHeight), // Offset for fixed header
                        behavior: 'smooth'
                    });
                    // Close mobile menu after clicking a link
                    if (navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
                    }
                }
            });
        });

        // Add to cart from product card (only relevant on products.html)
        function handleAddToCartClick(e) {
            e.stopPropagation(); // Prevent quick view modal from opening
            const productId = e.target.dataset.productId;
            const productToAdd = products.find(p => p.id === productId);

            if (productToAdd) {
                const existingItem = cart.find(item => item.productId === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ productId: productId, quantity: 1 });
                }
                saveCart();

                // Animation feedback
                e.target.textContent = "Added!";
                e.target.style.backgroundColor = "var(--accent)";
                e.target.style.transform = "scale(1.05)";
                setTimeout(() => {
                    e.target.textContent = "Add to Cart";
                    e.target.style.backgroundColor = "";
                    e.target.style.transform = "";
                }, 1500);
            }
        }

        // Quick View Modal (only relevant on products.html)
        function handleProductImageClick(e) {
            const productCard = e.target.closest('.product-card');
            if (!productCard) return;

            const productId = productCard.dataset.productId;
            const productData = products.find(p => p.id === productId);

            if (productData) {
                if (modalProductImage) modalProductImage.src = productData.image;
                if (modalProductImage) modalProductImage.alt = productData.name;
                if (modalProductCategory) modalProductCategory.textContent = productData.category;
                if (modalProductTitle) modalProductTitle.textContent = productData.name;
                if (modalProductDescription) modalProductDescription.textContent = productData.description;

                let priceHtml = formatPrice(productData.price);
                if (productData.oldPrice && productData.oldPrice !== 0) {
                    priceHtml += ` <span>${formatPrice(productData.oldPrice)}</span>`;
                }
                if (modalProductPrice) modalProductPrice.innerHTML = priceHtml;
                if (modalProductRating) modalProductRating.innerHTML = getRatingStars(productData.rating);

                if (modalProductQuantityInput) modalProductQuantityInput.value = 1; // Reset quantity
                if (modalAddToCartBtn) modalAddToCartBtn.dataset.productId = productData.id; // Set product ID for modal's add to cart button

                if (quickViewModal) quickViewModal.classList.add('active');
                document.body.style.overflow = 'hidden'; // Prevent scrolling background
            }
        }

        if (closeQuickViewModalBtn) {
            closeQuickViewModalBtn.addEventListener('click', () => {
                quickViewModal.classList.remove('active');
                document.body.style.overflow = '';
            });
        }

        if (quickViewModal) {
            quickViewModal.addEventListener('click', (e) => {
                if (e.target === quickViewModal) {
                    quickViewModal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }

        if (decreaseModalQuantityBtn) {
            decreaseModalQuantityBtn.addEventListener('click', () => {
                let currentQuantity = parseInt(modalProductQuantityInput.value);
                if (currentQuantity > 1) {
                    modalProductQuantityInput.value = currentQuantity - 1;
                }
            });
        }

        if (increaseModalQuantityBtn) {
            increaseModalQuantityBtn.addEventListener('click', () => {
                let currentQuantity = parseInt(modalProductQuantityInput.value);
                modalProductQuantityInput.value = currentQuantity + 1;
            });
        }

        if (modalAddToCartBtn) {
            modalAddToCartBtn.addEventListener('click', (e) => {
                const productId = e.target.dataset.productId;
                const quantity = parseInt(modalProductQuantityInput.value);
                const productToAdd = products.find(p => p.id === productId);

                if (productToAdd) {
                    const existingItem = cart.find(item => item.productId === productId);
                    if (existingItem) {
                        existingItem.quantity += quantity;
                    } else {
                        cart.push({ productId: productId, quantity: quantity });
                    }
                    saveCart();

                    // Animation feedback
                    e.target.textContent = `Added ${quantity} to Cart!`;
                    e.target.style.backgroundColor = "var(--accent)";
                    setTimeout(() => {
                        e.target.textContent = "Add to Cart";
                        e.target.style.backgroundColor = "";
                        quickViewModal.classList.remove('active');
                        document.body.style.overflow = '';
                    }, 1500);
                }
            });
        }


        // Shopping Cart Modal
        cartBtn.addEventListener('click', () => {
            renderCartItems();
            cartModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        closeCartModalBtn.addEventListener('click', () => {
            cartModal.classList.remove('active');
            document.body.style.overflow = '';
        });

        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        function handleQuantityChange(e) {
            const productId = e.target.dataset.productId;
            const inputElement = document.querySelector(`.cart-quantity-input[data-product-id="${productId}"]`);
            let currentQuantity = parseInt(inputElement.value);

            if (e.target.classList.contains('decrease-quantity')) {
                if (currentQuantity > 1) {
                    currentQuantity--;
                }
            } else if (e.target.classList.contains('increase-quantity')) {
                currentQuantity++;
            }
            inputElement.value = currentQuantity;
            updateCartItemQuantity(productId, currentQuantity);
        }

        function handleQuantityInputChange(e) {
            const productId = e.target.dataset.productId;
            let currentQuantity = parseInt(e.target.value);
            if (isNaN(currentQuantity) || currentQuantity < 1) {
                currentQuantity = 1; // Default to 1 if invalid input
                e.target.value = 1;
            }
            updateCartItemQuantity(productId, currentQuantity);
        }

        function updateCartItemQuantity(productId, newQuantity) {
            const itemIndex = cart.findIndex(item => item.productId === productId);
            if (itemIndex > -1) {
                cart[itemIndex].quantity = newQuantity;
                saveCart();
                renderCartItems(); // Re-render cart to update totals
            }
        }

        function handleRemoveFromCart(e) {
            const productId = e.target.closest('.remove-from-cart').dataset.productId;
            cart = cart.filter(item => item.productId !== productId);
            saveCart();
            renderCartItems(); // Re-render cart to update display
        }

        checkoutBtn.addEventListener('click', () => {
            if (cart.length > 0) {
                // Simulate checkout process
                // In a real app, this would send data to a backend
                alert('Proceeding to checkout! (This is a frontend simulation)');
                cart = []; // Clear cart after checkout
                saveCart();
                cartModal.classList.remove('active');
                document.body.style.overflow = '';
            } else {
                alert('Your cart is empty!');
            }
        });

        // Login/Register Modal
        loginBtn.addEventListener('click', () => {
            if (currentUser) {
                // Logout if already logged in
                currentUser = null;
                saveCurrentUser();
                alert('You have been logged out.');
            } else {
                // Open login/register modal
                isLoginMode = true;
                authModalTitle.textContent = 'Login';
                authSubmitBtn.textContent = 'Login';
                toggleAuthModeBtn.textContent = "Don't have an account? Register";
                confirmPasswordGroup.style.display = 'none'; // Hide confirm password for login
                authErrorMessage.style.display = 'none';
                authForm.reset(); // Clear form fields
                authModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        });

        closeAuthModalBtn.addEventListener('click', () => {
            authModal.classList.remove('active');
            document.body.style.overflow = '';
        });

        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                authModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        toggleAuthModeBtn.addEventListener('click', () => {
            isLoginMode = !isLoginMode;
            authModalTitle.textContent = isLoginMode ? 'Login' : 'Register';
            authSubmitBtn.textContent = isLoginMode ? 'Login' : 'Register';
            toggleAuthModeBtn.textContent = isLoginMode ? "Don't have an account? Register" : "Already have an account? Login";
            confirmPasswordGroup.style.display = isLoginMode ? 'none' : 'block'; // Show/hide confirm password
            authErrorMessage.style.display = 'none'; // Clear error message on mode switch
            authForm.reset(); // Clear form fields
        });

        authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = authUsernameInput.value;
            const password = authPasswordInput.value;
            authErrorMessage.style.display = 'none';

            if (isLoginMode) {
                // Login logic
                if (users[username] && users[username].password === password) {
                    currentUser = { username: username };
                    saveCurrentUser();
                    authModal.classList.remove('active');
                    document.body.style.overflow = '';
                    alert(`Welcome back, ${username}!`);
                } else {
                    authErrorMessage.textContent = 'Invalid username or password.';
                    authErrorMessage.style.display = 'block';
                }
            } else {
                // Register logic
                const confirmPassword = authConfirmPasswordInput.value;
                if (password !== confirmPassword) {
                    authErrorMessage.textContent = 'Passwords do not match.';
                    authErrorMessage.style.display = 'block';
                    return;
                }

                if (users[username]) {
                    authErrorMessage.textContent = 'Username already exists. Please choose another.';
                    authErrorMessage.style.display = 'block';
                } else {
                    users[username] = { password: password };
                    saveUsers();
                    currentUser = { username: username };
                    saveCurrentUser();
                    authModal.classList.remove('active');
                    document.body.style.overflow = '';
                    alert(`Registration successful! Welcome, ${username}!`);
                }
            }
        });

        // Contact Form Submission (Frontend only)
        const contactForm = document.getElementById('contactForm');
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            // In a real application, this data would be sent to a backend
            alert('Thank you for your message! We will get back to you soon. (This is a frontend simulation)');
            contactForm.reset();
        });

        // Back to Top Button Functionality
        window.addEventListener('scroll', () => {
            if (window.scrollY > 400) { // Show button after scrolling 400px
                backToTopButton.classList.add('show');
            } else {
                backToTopButton.classList.remove('show');
            }
        });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', () => {
            // renderProducts(); // Only render products on products.html
            updateCartCount();
            updateUserGreeting();

            // Initialize intersection observer for sections present on this page
            const faders = document.querySelectorAll('.section-title, .about-content, .testimonial-card, .contact-container, .quick-access .btn-group'); /* Added .quick-access .btn-group */
            const appearOptions = {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            };

            const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        return;
                    } else {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                        entry.target.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
                        appearOnScroll.unobserve(entry.target);
                    }
                });
            }, appearOptions);

            faders.forEach(fader => {
                fader.style.opacity = 0;
                fader.style.transform = 'translateY(30px)';
                appearOnScroll.observe(fader);
            });

            // Add a subtle header shrink/shadow on scroll
            const header = document.querySelector('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 80) {
                    header.style.padding = '12px 0';
                    header.style.boxShadow = '0 6px 18px var(--shadow-medium)';
                } else {
                    header.style.padding = '18px 0';
                    header.style.boxShadow = '0 4px 15px var(--shadow-md)';
                }
            });
        });

    </script>
</body>
</html>
